(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var a=t.g.document;if(!e&&a&&(a.currentScript&&"SCRIPT"===a.currentScript.tagName.toUpperCase()&&(e=a.currentScript.src),!e)){var n=a.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=n[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();const e=t.p+"bb351cb89344cf5316c4.png",a=t.p+"e376cccbc8f00d095ff1.svg",n=t.p+"b7733d7fef79909394bf.svg",s=(t,e)=>{let a=t.querySelector(`[data-book-info = "${e}"]`).dataset.bookid;localStorage.removeItem(a)},o=document.getElementById("cart-count"),c=(t,e)=>{t.innerHTML="In the cart",t.classList.add("btn_in-cart"),o.classList.remove("cart-btn__count_empty"),o.textContent=e},r=(t,e)=>{t.innerHTML="Buy now",t.classList.remove("btn_in-cart"),0===e&&o.classList.add("cart-btn__count_empty"),o.textContent=e},i=t=>{if(localStorage.length)for(let e=0;e<localStorage.length;e++)localStorage.key(e)===t.dataset.bookid&&(t.innerHTML="In the cart",t.classList.add("btn_in-cart"))},l=(t,o)=>{let l=document.getElementById("product-list"),d=null;o&&(l.innerHTML=""),t.items.forEach((t=>{let s="",o=null,c=t.id,r="",i="",d="",u="",g="";if(t.volumeInfo.authors){let e=t.volumeInfo.authors,a="";e.forEach(((t,e,n)=>{e===n.length-1?a+=`${t}`:a+=`${t}, `})),r=`<p class="product__author" data-book-info="author">${a}</p>`}if(o=t.volumeInfo.imageLinks?t.volumeInfo.imageLinks.thumbnail:e,t.volumeInfo.title&&(i=`<h1 class="product__title" data-book-info="title">${t.volumeInfo.title}</h1>`),t.volumeInfo.description&&t.volumeInfo.description.length>90?u=`<p class="product__description" data-book-info="description">${t.volumeInfo.description.slice(0,91)+"..."}</p>`:t.volumeInfo.description&&(u=`<p class="product__description" data-book-info="description">${t.volumeInfo.description}</p>`),t.volumeInfo.averageRating){let e=t.volumeInfo.ratingsCount;d=`<div class="product__rating">\n                      <div class="rating__stars">\n                        <img src=${a} alt="Icon" class="star">\n                        <img src=${a} alt="Icon" class="star">\n                        <img src=${a}  alt="Icon" class="star">\n                        <img src=${n}  alt="Icon" class="star">\n                        <img src=${n}  alt="Icon" class="star">\n                      </div>\n                      <span class="review-nums">${e} review</span>\n                    </div>`}else d=`<div class="product__rating">\n      <div class="rating__stars">\n        <img src=${n} alt="Icon" class="star">\n        <img src=${n} alt="Icon" class="star">\n        <img src=${n}  alt="Icon" class="star">\n        <img src=${n}  alt="Icon" class="star">\n        <img src=${n}  alt="Icon" class="star">\n      </div>\n      <span class="review-nums"> no review</span>\n    </div>`;if(t.saleInfo.listPrice){let e=t.saleInfo.listPrice.amount;const a=98;g=`<div class="product__price">\n                    <span class="price__currency">$</span><span class="price__value" data-book-info="price">${Math.floor(100*e/a)/100}</span>\n                  </div>`}s=`<div class="products-list__item product">\n                      <img src="${o}" alt="Book cover" class="product__img" data-book-info="thumbnail">\n                      <div class="product__card">\n                        ${r}\n                        ${i}\n                        ${d}\n                        ${u}\n                        ${g}\n                        <button class="btn buy-button" data-book-info="id" data-bookid="${c}">Buy now</button>\n                      </div>\n                    </div>`,l.insertAdjacentHTML("beforeend",s)})),d=document.getElementsByClassName("buy-button"),(t=>{for(let e of t)i(e),e.addEventListener("click",(t=>{const e=t.target.parentElement.parentElement,a={id:"",thumbnail:"",author:"",title:"",description:"",price:""};for(let t in a){let n=e.querySelector(`[data-book-info = "${t}"]`);n&&"id"===t?a[t]=n.dataset.bookid:n&&"thumbnail"===t?a[t]=n.getAttribute("src"):n&&(a[t]=n.textContent)}var n;t.target.classList.contains("btn_in-cart")?(s(e,"id"),r(t.target,localStorage.length)):(n=a,localStorage.getItem(`${n.id}`)||localStorage.setItem(`${n.id}`,JSON.stringify(n)),c(t.target,localStorage.length))}))})(d)},d=document.getElementById("btn-load"),u=document.querySelectorAll(".categories__item"),g="https://www.googleapis.com/books/v1/volumes",m={category:"Architecture",startIndex:0,maxResults:6,langRestrict:"en"},p=t=>{let e=document.querySelector(".categories__item_selected").dataset.category;return m.category=e,!0===t&&(m.startIndex=0),m},v=(t,e,a,n)=>{let s=`${t}?q="subject:${m.category}"&AIzaSyB7D4Uic0eTPc-0H3yYfiBbZ3VDM5k6sgc&printType=books&startIndex=${m.startIndex}&maxResults=${m.maxResults}&langRestrict=${m.langRestrict}`;fetch(s).then((t=>t.json())).then((t=>{a(t,n)})).catch((t=>console.log(t.message)))};var f;u.forEach((t=>t.addEventListener("click",(e=>{e.preventDefault(),(t=>{let e=t;document.querySelector(".categories__item_selected").classList.remove("categories__item_selected"),e.classList.add("categories__item_selected")})(t),p(!0),v(g,0,l,!0)})))),d.addEventListener("click",(()=>{p().startIndex+=6,v(g,0,l,!1)})),f=localStorage.length,localStorage.length&&(o.classList.remove("cart-btn__count_empty"),o.textContent=f),v(g,0,l,!1);let _=[{url:t.p+"c0c7ea9634c7a88c22d5.png"},{url:t.p+"579ee7cfd158848187a3.png"},{url:t.p+"203132e33aa6a0bf0404.png"}];let b={titles:!1,dots:!0,autoplay:!0,autoplayInterval:5e3};document.addEventListener("DOMContentLoaded",(function(){!function(t){if(!_||!_.length)return;t=t||{titles:!0,dots:!0,autoplay:!1};let e=document.querySelector(".slider__images"),a=document.querySelector(".slider__dots");function n(n){e.querySelector(".active").classList.remove("active"),e.querySelector(".n"+n).classList.add("active"),t.dots&&(a.querySelector(".active").classList.remove("active"),a.querySelector(".n"+n).classList.add("active")),t.titles&&function(t){_[t].title&&(e.querySelector(".slider__images-title").innerText=_[t].title)}(n)}_.forEach(((t,a)=>{let n=`<div class="image n${a} ${0===a?"active":""}" style="background-image:url(${_[a].url})" data-index="${a}"></div>`;e.innerHTML+=n})),t.dots&&(_.forEach(((t,e)=>{let n=`<div class="slider__dots-item n${e} ${0===e?"active":""}" data-index="${e}"></div>`;a.innerHTML+=n})),a.querySelectorAll(".slider__dots-item").forEach((t=>{t.addEventListener("click",(t=>{n(t.target.dataset.index)}))}))),t.titles&&function(){let t=`<div class="slider__images-title">${_[0].title}</div>`;e.innerHTML+=t}(),t.autoplay&&setInterval((()=>{let t=+e.querySelector(".active").dataset.index;n(t===_.length-1?0:t+1)}),t.autoplayInterval)}(b)}))})();
//# sourceMappingURL=main.js.map